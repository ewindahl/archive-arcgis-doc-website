define(["dojo/_base/declare","Config","dojo/query","dojo/topic"],function(e,t,n,r){function s(){r.publish("planConfirmationLoadError","plan information failed to load")}function o(){n("#current-plan").html(subscription.product.credits+" credits, $"+subscription.product.price+" / month");var e=new Date(subscription.startDate);n("#term-start").html(e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear());var t=new Date(subscription.endDate);n("#term-end").html(t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear()),n("#credit-allowance").html(subscription.newCreditBalance)}var i=e([],{subscription:{},loadSubscription:function(e,n){esri.request({url:t.billing+"/subscription/product/"+e,content:{f:"json",token:n}}).then(function(e){e.code=="200"?(subscription=e,o()):s()},function(e){s()})}});return esri.confirmation=new i,esri.confirmation});