define(["SessionManager","dojo/_base/declare","dojo/_base/lang","dojo/_base/event","dojo/query","Quoin/View","dojo/text!/templates/application-manager/single","dojo/NodeList-dom","dojo/NodeList-manipulate","ApplicationManager/helpers/handlebars"],function(e,t,n,r,i,s,o){return t([s],{templateString:o,bindings:{title:"h3 innerHTML",description:".content p innerHTML",type:function(){i(".applicationType",this.domNode).innerHTML(this.model.get("type")||"Application")},tags:function(){var e=this.model.get("tags");for(var t=0;t<e.length;t++)i(this.tags).append("<span class='tag icon-tag'>"+e[t]+"</span>")}},events:{".show-keys click":"showKeys",".quick-register click":"quickRegister",".item-link click":"redirectToItem"},redirectToItem:function(){window.location=e.orgUrl()+"/home/item.html?id="+this.model.get("id")},edit:function(e){this.publish("router:navigate","edit/"+this.model.get("id"))},renderAuth:function(e){this.clientId.innerHTML="<pre><code>"+this.model.get("oAuthInfo").client_id+"</code></pre>",this.clientSecret.innerHTML="<pre><code>"+this.model.get("oAuthInfo").client_secret+"</code></pre>"},registerError:function(){var e="<span class='error-text'>Could not register application.</span>";this.clientId.innerHTML=e,this.clientSecret.innerHTML=e},quickRegister:function(){this.model.registerApp(!0).then(n.hitch(this,this.renderAuth),n.hitch(this,this.registerError))},showKeys:function(e){var t;this.model.getOauthInfo().then(n.hitch(this,this.renderAuth),n.hitch(this,function(e){e.message==="Not a registered app"?t="<span>Not registered</span> <button data-application-id='"+this.model.get("id")+"' class='btn small light quick-register'>Register</button>":t="<span class='error-text'>Could not get key info.</span>",this.clientId.innerHTML=t,this.clientSecret.innerHTML=t}))}})});