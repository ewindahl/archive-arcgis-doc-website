require(["Config","SessionManager","dojo/query","dojo/dom-form","dojo/io-query"],function(e,t,n,r,i){function s(){var e=window.location.search,t=e.substring(e.indexOf("?")+1,e.length),n=i.queryToObject(t);if(n.hasOwnProperty("success")){var r=n.id||0;a("handleFormCompletion",[n.success,r])}}function o(){var r=location.protocol+"//"+location.host;esri.request({url:e.billing+"/cc/ecomm/signature",content:{token:t.token(),redirectUrl:r+"/"+dojo.locale.substr(0,2)+"/account/credit-card-form",f:"json"},handleAs:"json"}).then(function(e){UpdatePaymentPageContent(e.signature),ShowCVV=!1,a("handleFormLoad")},function(e){n("#credit-card").addClass("hide"),n("#error-message").removeClass("hide"),a("handleFormFailure")})}function u(e,t){var r=n('select[name="'+e+'"]')[0];for(var i=0;i<r.length;i++)if(r.options[i].value==t){r.selectedIndex=i;break}}function a(e,t){try{parent[e].apply(parent,t)}catch(n){}}t.queue(o),s(),dojo.global.getCreditCardValues=function(){return r.toObject("credit-card")},dojo.global.repopulateCreditCardForm=function(e){u("Paymetric_CreditCardType",e.Paymetric_CreditCardType),n("#Paymetric_CreditCardNumber").val(e.Paymetric_CreditCardNumber),n("#Paymetric_Exp_Month").val(e.Paymetric_Exp_Month),n("#Paymetric_Exp_Year").val(e.Paymetric_Exp_Year),n("#Paymetric_CVV").val(e.Paymetric_CVV),e.Paymetric_CreditCardNumber.length>0?(n("#Paymetric_CreditCardNumber").attr("disabled","disabled"),n("#Paymetric_CreditCardType").attr("disabled","disabled")):(n("#Paymetric_CreditCardNumber").removeAttr("disabled"),n("#Paymetric_CreditCardType").removeAttr("disabled"))},dojo.global.submitCreditCardForm=function(){var e=r.toObject("credit-card"),t=xis2(document.getElementById("credit-card"));t?a("handleFormSumission",[e]):a("handleFormValiationFailure")}});