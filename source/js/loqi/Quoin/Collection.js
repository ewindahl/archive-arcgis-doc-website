define(["dojo/_base/declare","dojo/_base/lang","dojox/mvc/StatefulArray","dojo/store/Memory","dojo/Evented","Quoin/Base"],function(e,t,n,r,i,s){return e("Quoin.Collection",[r,i,s],{constructor:function(e,r){this.model=e.model,this.data=new n(r||[]),this.data.watchElements(t.hitch(this,function(e,t,n){t.length&&this.emit("item:removed",{index:e,removals:t}),n.length&&this.emit("item:added",{index:e,additions:n})}))},forEach:function(e,t){for(var n=0;n<this.data.length;n++){var r=this.data[n];e.apply(t||this,[r,n,this])}},create:function(e,t){var n=new this.model(e);return this.add(n,t),n.create()},add:function(e){e.set("collection",this),this.inherited(arguments)},remove:function(e){this.get(e).set("collection",null),this.inherited(arguments)},fetch:function(){},destroy:function(e){var t=this.get(e);this.remove(e),t.destroy()}})});