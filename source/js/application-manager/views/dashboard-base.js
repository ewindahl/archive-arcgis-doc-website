define(["SessionManager","dojo/_base/declare","dojo/_base/event","dojo/_base/lang","dojo/query","Quoin/View","Quoin/Controller","dojo/text!/templates/application-manager/dashboard","dojo/text!/templates/application-manager/nav"],function(e,t,n,r,i,s,o,u,a){return t([s],{templateString:u,postMixInProperties:function(){this.inherited(arguments),this.addPartial("nav",a),this.addHelper("ifAdminFor",r.hitch(this,function(t,n){return e.username()===t.model.get("owner")||e.role()==="admin"?n.fn(t):n.inverse(t)})),this.addHelper("ifForApplication",function(e,t){return e.model.get("forApplication")?t.fn(e):t.inverse(e)})},bindings:{serviceUsage:function(){this.createGraph()},creditsUsed:"#lastThirtyDays innerHTML",averagePerDay:"#averagePerDay innerHTML"},createGraph:function(){graph1data=this.model.get("serviceUsage"),i("#loader1",this.domNode).addClass("hidden");var e=d3.scale.category20();keyColor=function(t,n){return e(t.key)};var t;nv.addGraph(function(){return t=nv.models.stackedAreaChart().x(function(e){return e[0]}).y(function(e){return e[1]}).color(keyColor).showControls(!1).tooltips(!0),t.xAxis.tickFormat(function(e){return d3.time.format("%b %e")(new Date(e))}),t.yAxis.tickFormat(d3.format(",.2f")),d3.select("#chart-1").datum(graph1data).call(t),nv.utils.windowResize(t.update),t})}})});